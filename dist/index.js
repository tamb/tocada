function z(L,M){if(L<M)return M-L;else return L-M}function A(L,M){const b=L.clientX-M.clientX,j=L.clientY-M.clientY;return Math.hypot(b,j)}function x(L,M={}){return new C(L,M)}class C{element;startX=0;startY=0;startTime=0;startPressure=0;endPressure=0;startingElement=null;touchedElements=[];thresholds;eventPrefix="";gestureStartDistance=0;latestGestureDistance=0;isMultiTouch=!1;activeTouches=0;touchCount=0;constructor(L,M={}){if(this.element=typeof L==="string"?document.querySelector(L):L,!this.element){console.error("Element not found");return}const{thresholds:b={},eventPrefix:j=""}=M;this.thresholds={swipeThreshold:b.swipeThreshold||50},this.eventPrefix=j,this.element.addEventListener("touchstart",this.handleTouchStart,!1),this.element.addEventListener("touchmove",this.handleTouchMove,!1),this.element.addEventListener("touchend",this.handleTouchEnd,!1)}destroy=()=>{this.element?.removeEventListener("touchstart",this.handleTouchStart),this.element?.removeEventListener("touchmove",this.handleTouchMove),this.element?.removeEventListener("touchend",this.handleTouchEnd)};handleTouchStart=(L)=>{if(this.activeTouches+=L.changedTouches.length,this.touchCount=L.touches.length,this.activeTouches>1)this.isMultiTouch=!0,this.gestureStartDistance=A(L.touches[0],L.touches[1]),this.handleGestureStart(L);else this.isMultiTouch=!1,this.handleSwipeStart(L)};handleTouchMove=(L)=>{L.preventDefault();const M=L.touches[0].clientX,b=L.touches[0].clientY,j=document.elementFromPoint(M,b);if(j)this.touchedElements.push(j);if(this.isMultiTouch)this.handleGestureMove(L)};handleTouchEnd=(L)=>{if(this.activeTouches>=2)this.handleGestureEnd(L),this.touchCount=0;else if(this.activeTouches===1)this.handleSwipeEnd(L),this.touchCount=0;this.activeTouches-=L.changedTouches.length};handleSwipeStart=(L)=>{const M=L.touches[0];this.startX=M.clientX,this.startY=M.clientY,this.startTime=Date.now(),this.startPressure=M.force||0,this.startingElement=document.elementsFromPoint(this.startX,this.startY)[0],this.touchedElements.push(this.startingElement)};handleSwipeEnd=(L)=>{if(!this.isMultiTouch&&this.touchCount===1){const M=L.changedTouches[0],b=Date.now(),j=b-this.startTime,k=z(this.startX,M.clientX),w=z(this.startY,M.clientY),F=Math.abs(k),G=Math.abs(w),H=Math.hypot(F,G),J=k/j,K=w/j,Q=H/j;this.endPressure=M.force||0;const R=(this.startPressure+this.endPressure)/2,U=document.elementFromPoint(M.clientX,M.clientY),I={velocityX:J,velocityY:K,velocity:Q,avgPressure:R,startPressure:this.startPressure,endPressure:this.endPressure,startTime:this.startTime,endTime:b,distanceX:F,distanceY:G,distance:H,startingElement:this.startingElement,endingElement:U,touchedElements:this.touchedElements};this.dispatchSwipeEvent("swipe",I);const V=this.startX<M.clientX?"swiperight":"swipeleft",W=this.startY<M.clientY?"swipedown":"swipeup",Z=k>w?V:W;this.dispatchSwipeEvent(Z,I),this.touchedElements=[]}};handleGestureStart=(L)=>{this.isMultiTouch=!0};handleGestureMove=(L)=>{this.latestGestureDistance=A(L.touches[0],L.touches[1])};handleGestureEnd=(L)=>{if(this.isMultiTouch=!1,this.dispatchGestureEvent("gesture"),this.latestGestureDistance<this.gestureStartDistance)this.dispatchGestureEvent("pinch");else this.dispatchGestureEvent("spread");this.latestGestureDistance=0};dispatchSwipeEvent=(L,M)=>{const b=this.eventPrefix+L,j=new CustomEvent(b,{detail:M});this.element.dispatchEvent(j)};dispatchGestureEvent=(L)=>{const M=this.eventPrefix+L,b=new CustomEvent(M);this.element.dispatchEvent(b)}}export{x as useTouchEvents,C as default};

//# debugId=EBC3FED4EC16DEBD64756e2164756e21
